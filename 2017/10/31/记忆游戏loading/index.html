






<!doctype html>
<html lang="zh-Hans">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="Yhuann">
  
  
  
  
    <meta name="description" content="第一次将项目里的问题发布在群里、小团队里，并在论坛里发帖求助。收到了积极的帮助与莫大的关怀！让我感觉很温暖并且有点想继续挑战。。

setTimeout

遇到的第一个自己没法解决的问题是setTimeout函数，这又涉及到了JavaScript的运行机制，群里的monter还给了例子来帮助理解。简单的我认为还过得去，不知道以后情况复杂了又会怎样。
反正！当需要实时反馈的操作，如渲染等，就可...">
  
  <title>记忆游戏loading... [ 该叫什么好 ]</title>
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  <link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">
  
</head>

<body>
<div class="side-navigate hide-area">
  
    <div class="item prev">
      <a href="/2017/12/03/Block-map-loading/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        Block map loading...
      </div>
    </div>
  
  
    <div class="item next">
      <a href="/2017/10/23/UI面试引发的血案。。。/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        UI面试引发的血案。。。
      </div>
    </div>
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="/uploads/avatar.jpg"/>
          <div id="homelink">该叫什么好</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/">Home</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">Archives</a>
            
          </li>
        
          
            <li>
          
            <a href="/tags">Tags</a>
            
          </li>
        
          
            <li>
          
            <a href="/categories">Categories</a>
            
          </li>
        
          
            <li>
          
            <a href="/about">About</a>
            
          </li>
        
          
            <li>
          
            <a href="https://github.com/yangyunhan/yangyunhan.github.io">Github</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  <article id="post">
    <h1>记忆游戏loading...</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">Created at 2017-10-31</span>
      
        <span id = "post-title-updated">Updated at 2018-03-08</span>
      
      
      <span id = "post-title-categories">Category
      
      
        
        
        <a href="/categories/skill/">skill</a>
      
      </span>
      
      
      <span id = "post-title-tags">
      Tag
      
      
        
        
        <a href="/tags/tips/">tips</a>
      
      </span>
      
    </p>
    
    <p>第一次将项目里的问题发布在群里、小团队里，并在论坛里发帖求助。收到了积极的帮助与莫大的关怀！让我感觉很温暖并且有点想继续挑战。。</p>
<ul>
<li><p><strong>setTimeout</strong></p>
<ul>
<li>遇到的第一个自己没法解决的问题是setTimeout函数，这又涉及到了JavaScript的运行机制，群里的monter还给了例子来帮助理解。简单的我认为还过得去，不知道以后情况复杂了又会怎样。</li>
<li>反正！当需要实时反馈的操作，如渲染等，就可以尝试使用setTimeout！</li>
<li>js引擎是单线程的，浏览器是多线程的，js引擎只是浏览器的一个线程而已。定时器计时、网络请求、浏览器渲染等等，都是由不同的线程完成的。js引擎与GUI引擎是互斥的。DOM操作是异步的。异步操作会被延迟到同步计算之后执行。异步代码放到一起也会造成丢帧，无法实施的反应。</li>
<li>放两篇我觉得写的还不错的博客：<ul>
<li><a href="http://blog.csdn.net/kobejayandy/article/details/17539753" target="_blank" rel="noopener">同步与异步</a></li>
<li><a href="http://www.cnblogs.com/yelongsan/p/6296700.html" target="_blank" rel="noopener">setTimeout</a></li>
<li><a href="www.cnblogs.com/TomXu/archive/2011/12/31/2289423.html">立即调用的函数表达式</a></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>.prototype与.<strong>proto</strong></strong></p>
<ul>
<li>在掘金上遇到的一篇文章，提到的原型，狠狠的读了几遍并找书，找博客。有理解了一些，但是还没有应用到。先把整理的贴上来。<br><img src="/2017/10/31/记忆游戏loading/prototype与__proto__.jpg" alt="原型理解"></li>
<li>好的博客：<ul>
<li><a href="www.cnblogs.com/snandy/archive/2012/09/01/2664134.html">www.cnblogs.com/snandy/archive/2012/09/01/2664134.html</a></li>
<li><a href="http://www.cnblogs.com/yjf512/archive/2011/06/03/2071914.html" target="_blank" rel="noopener">http://www.cnblogs.com/yjf512/archive/2011/06/03/2071914.html</a></li>
<li><a href="http://www.cnblogs.com/haodawang/articles/5814966.html" target="_blank" rel="noopener">http://www.cnblogs.com/haodawang/articles/5814966.html</a></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>$.each()</strong></p>
<ul>
<li>因为逻辑混乱，助教建议我用jqury写，于是我又开始复习jquery（没救了，老忘。。。）。然后一开始就碰到了循环迭代的问题（也是见有人发贴才发现的，不然不知道要用什么笨方法了）。</li>
<li><p>然后某位不知其名的大神又用立即执行函数解决了问题，在我刚要放弃的时候，发现了自己试出来的方法好像也可行。所以一定要记录下来，因为下次用的时候估计是会忘的。</p>
</li>
<li><p><em>citation context</em>:洗牌。li元素对象数组，牌标字符串数组。要同时遍历li元素和字符串数组，为每个li元素添加每个字符串数组中的类名。定义了一个<code>cards_all</code>全局变量，调用了洗牌的函数<code>cards_all = shuffle(cards_all);</code>。基于此：</p>
</li>
<li><p>可能的错误：1. 一股脑的加到了一个li元素上。结果是每一个li元素上都加了所有的字符串数组，共迭代了16遍。代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;cards_all.length;i++)&#123;</div><div class="line">	$(<span class="string">".deck .fa"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		$(<span class="keyword">this</span>).addClass(cards_all[i]);</div><div class="line">	&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>大神的立即调用方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">       $(<span class="string">".deck .fa"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">           $(<span class="keyword">this</span>).addClass(cards_all[i++]);</div><div class="line">       &#125;)</div><div class="line">   &#125;)(<span class="number">0</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>自己摸索出来的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'.deck li'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">       $(<span class="keyword">this</span>).find(<span class="string">'.fa'</span>).addClass(cards_all[i]);</div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>总结来说，就是$().each()方法的理解，通常用来遍历数组和对象。对于同时遍历多个数组很方便，<code>each(i,data)</code>参数i是索引，<code>data</code>是数值，如果打印<code>data[0]</code>，出来的是两个数组的第一项。</p>
</li>
<li>如果操作DOM，看节点的内容，用<code>text()</code>和<code>html()</code>居然都不起作用。在控制台点开对象，才知道要用<code>.context</code>（Firefox、Chrome和IE都这样）。</li>
<li>说<code>$().each()</code>与<code>$.each()</code>的区别是<code>$().each()</code>用来处理DOM，<code>$.each()</code>用来处理数组。本质上都是由js的<code>call()</code>实现的。</li>
<li><code>.each()</code>与<code>.map()</code>,<code>.map()</code>是遍历某个数组，然后按照某种功能函数求得结果返回。</li>
</ul>
</li>
<li><p><em>浏览器的加载、解析、渲染过程</em></p>
</li>
</ul>
<p>&emsp;&emsp;遇到这个问题是因为我在修改审阅意见中的代码时，把jquery文件错误的放在了交互js代码的后面，导致错误<code>$未被定义</code>，把它放在head标签里就好了。所以是我浏览器的工作原理及过程没有搞清楚。找了篇文章，讲的还算是可以理解，并发现一篇有名的文章。然而不能一次看完。。先贴下</p>
<pre><code>- 了解浏览器加载、解析、渲染过程的目的：
    - 了解浏览器如何进行加载，可以在引用外部样式文件，外部js时，将他们放到合适的位置，使浏览器以最快的速度将文件加载完毕。
    - 了解浏览器如何进行解析，可以在构建DOM结构，组织css选择器时，选择最优的写法，提高浏览器的解析速率。
    - 了解浏览器如何进行渲染，明白渲染的过程，在设置元素属性，编写js文件时，可以减少”reflow“”repaint“的消耗。
- 相关博客：
    - [](http://blog.csdn.net/xiaozhuxmen/article/details/52014901)
    - [](http://www.codeweblog.com/how-browsers-work-%E4%B8%AD%E6%96%87%E7%89%88/)
</code></pre><ul>
<li><p><strong>用gulp搭建es6环境</strong></p>
<ul>
<li><p>gulp.src(globs[,options])匹配文件源</p>
</li>
<li><p>gulp.dest(path[,options])写文件，输出文件，如果文件不存在，则自动创建</p>
</li>
<li><p>gulp.task(name[,deps],fn)定义一个任务</p>
</li>
<li><p>gulp.watch(glob[,opts],tasks)监控文件变化</p>
</li>
<li><p>gulp文档：<a href="https://www.gulpjs.com.cn/docs/writing-a-plugin/" target="_blank" rel="noopener">https://www.gulpjs.com.cn/docs/writing-a-plugin/</a></p>
</li>
</ul>
</li>
<li><p>js刷新页面的几种方法（亲测有效）</p>
<ul>
<li><p>reload方法，强迫浏览器刷新当前页面，从客户端缓存里取当前页面</p>
<ul>
<li>window.location.reload();</li>
<li>window.location.reload(true);</li>
</ul>
</li>
<li><p>location = location;这个可以刷新页面，等同于location=location.href</p>
</li>
<li><p>assign方法，加载新的文档</p>
<ul>
<li>location.assign(location);</li>
</ul>
</li>
<li><p>replace方法，指定URL替换当前缓存在历史里的项目，使用后不能通过前进、后退来访问已经被替换的url。</p>
<ul>
<li>location.replace(location);</li>
</ul>
</li>
<li><p>幼稚的我以为location可以分为三种，其实有535种。。</p>
<ul>
<li><p><a href="http://www.phpied.com/files/location-location/location-location.html" target="_blank" rel="noopener">http://www.phpied.com/files/location-location/location-location.html</a></p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/location" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Window/location</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li>引用类型的值，如数组和对象，不能用<code>==</code>或<code>===</code>进行比较，得到的结果都是false。应转化为基本类型值再进行比较，如引用.toString()方法。</li>
<li><p>js数组强大的功能：splice，可以删除，添加和替换。</p>
<ul>
<li><p>删除，指明两个参数：要删除的位置和项数</p>
</li>
<li><p>添加，指明三个参数：要添加的位置，0，要添加的内容</p>
</li>
<li><p>替换，指明三个参数：要添加的位置，要删除的项数，要添加上的项数</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>最终效果：<a href="https://github.com/yangyunhan/memory-game" target="_blank" rel="noopener">https://github.com/yangyunhan/memory-game</a></p>
</li>
<li><p>待修改：动画效果插件：sweetalert 这个插件使用了最新的css特性和js特性，一般需要webpack做编译，在这个项目里使用gulp构建的前端工作自动流，暂时放弃引入。</p>
</li>
</ul>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">Show TOC</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">Hide TOC</button>
  <div class="random-toc">
    <h2>Table of Content</h2>
    
  </div>
</div>

  
<nav id="pagination">
  
    <a href="/2017/12/03/Block-map-loading/" class="prev">&larr; Prev post Block map loading...</a>
  

  

  
    <a href="/2017/10/23/UI面试引发的血案。。。/" class="next">Next post UI面试引发的血案。。。 &rarr;</a>
  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by Yhuann using
      <a href="http://hexo.io">Hexo</a> & <a href="https://github.com/stiekel/hexo-theme-random">Random</a>
      <br>
      
    </div>
  </div>
</div>

</div>



<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="/uploads/avatar.jpg">
    <p id="description"></p>
    <ul class="social-icon">
  
  
    <li>
      <a href="https://github.com/yangyunhan/yangyunhan.github.io">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://weibo.com/3817275592/profile?rightmod=1&wvr=6&mod=personinfo">
        
          <i class="icon iconfont weibo">&#xe602;</i>
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>




  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_1.jpg?imageView2/1/w/__width__/h/__height__');
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_2.jpg?imageView2/1/w/__width__/h/__height__');
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_3.jpg?imageView2/1/w/__width__/h/__height__');
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_4.jpg?imageView2/1/w/__width__/h/__height__');
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_5.jpg?imageView2/1/w/__width__/h/__height__');
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_6.jpg?imageView2/1/w/__width__/h/__height__');
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_7.jpg?imageView2/1/w/__width__/h/__height__');
    
      backgroundImages.push('http://7te9fe.com1.z0.glb.clouddn.com/bgimg_8.jpg?imageView2/1/w/__width__/h/__height__');
    
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"preload­Image":true,"transition":["slideLeft2","slideRight2","flash2"],"timer":true,"delay":5000,"shuffle":true,"count":28};
var unsplashConfig = {"gravity":"north"};
// is show background images
var turnoffBackgroundImage = false;



  turnoffBackgroundImage = true;


var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

